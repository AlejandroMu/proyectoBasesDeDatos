CREATE OR REPLACE PACKAGE BODY pk_solicitud_n1 IS

--[declaración de objetos privados]

    PROCEDURE pinsertarsolictud (
        n_solicitud             VARCHAR2,
        observaciones           VARCHAR2,
        fechaasignacion         DATE,
        fechaatencion           DATE,
        causa                   VARCHAR2,
        comentariofuncionario   VARCHAR2,
        cliente_cedula          VARCHAR2,
        estado_codigo           VARCHAR2,
        funcionario_cedula      VARCHAR2,
        anomalia_id             VARCHAR2,
        tiposolicitud_id        VARCHAR2,
        producto_id             VARCHAR2
    ) IS
    BEGIN
        INSERT INTO solicitud VALUES (
            n_solicitud,
            observaciones,
            fechaasignacion,
            fechaatencion,
            causa,
            comentariofuncionario,
            cliente_cedula,
            estado_codigo,
            funcionario_cedula,
            anomalia_id,
            tiposolicitud_id,
            producto_id
        );

    END pinsertarsolictud;

    PROCEDURE pmproducto (
        cods VARCHAR2,
        prod VARCHAR2
    ) IS
    BEGIN
        UPDATE solicitud s
        SET
            s.producto_id = prod
        WHERE
            s.n_solicitud = cods;

    END pmproducto;

    PROCEDURE pmsolicitudcomentario (
        cods VARCHAR2,
        come VARCHAR2
    ) IS
    BEGIN
        UPDATE solicitud s
        SET
            s.comentariofuncionario = come
        WHERE
            s.n_solicitud = cods;

    END pmsolicitudcomentario;
 
    PROCEDURE pmsolicitudatencion (
        cods VARCHAR2,
        fecha DATE
    ) IS
    BEGIN
        UPDATE solicitud s
        SET
            s.fechaatencion = fecha
        WHERE
            s.n_solicitud = cods;

    END pmsolicitudatencion;

    PROCEDURE pmodificarsolicitudestado (
        cods VARCHAR2,
        estado VARCHAR2
    ) IS
    BEGIN
        UPDATE solicitud s
        SET
            s.estado_codigo = estado
        WHERE
            s.n_solicitud = cods;

    END pmodificarsolicitudestado;

    PROCEDURE pborrarsolictud (
        n_solicitud VARCHAR2
    ) IS
    BEGIN
        DELETE FROM solicitud
        WHERE
            solicitud.n_solicitud = n_solicitud;

    END pborrarsolictud;

    PROCEDURE pmodificarsolictud (
        n_solicitud             VARCHAR2,
        observaciones           VARCHAR2,
        fechaasignacion         DATE,
        fechaatencion           DATE,
        causa                   VARCHAR2,
        comentariofuncionario   VARCHAR2,
        cliente_cedula          VARCHAR2,
        estado_codigo           VARCHAR2,
        funcionario_cedula      VARCHAR2,
        anomalia_id             VARCHAR2,
        tiposolicitud_id        VARCHAR2,
        producto_id             VARCHAR2
    ) IS
    BEGIN
        UPDATE solicitud s
        SET
            s.observaciones = observaciones,
            s.fechaasignacion = fechaasignacion,
            s.fechaatencion = fechaatencion,
            s.causa = causa,
            s.comentariofuncionario = comentariofuncionario,
            s.cliente_cedula = cliente_cedula,
            s.estado_codigo = estado_codigo,
            s.funcionario_cedula = funcionario_cedula,
            s.anomalia_id = anomalia_id,
            s.tiposolicitud_id = tiposolicitud_id,
            s.producto_id = producto_id
        WHERE
            s.n_solicitud = n_solicitud;

    END pmodificarsolictud;

    FUNCTION fconsultar (
        cod_solicitud VARCHAR2
    ) RETURN solicitud%rowtype IS
        fila   solicitud%rowtype;
    BEGIN
        SELECT
            *
        INTO fila
        FROM
            solicitud s
        WHERE
            s.n_solicitud = n_solicitud;

        RETURN fila;
    END fconsultar;
--[definición de subprogramas]

END pk_solicitud_n1;